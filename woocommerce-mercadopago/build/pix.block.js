(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wc.wcBlocksRegistry,s=window.wp.htmlEntities,a=window.wc.wcSettings,c="mercadopago_blocks_update_cart",o=({title:t,description:n,linkText:s,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":s,"link-src":a})),i=({title:t,subtitle:n,alt:s,linkSrc:a})=>(0,e.createElement)("pix-template",{title:t,subtitle:n,alt:s,src:a}),r=({description:t,linkText:n,linkSrc:s,checkoutClass:a="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${a}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":s})),l=(e,t,n)=>{const s={name:e,message:t,target:n,plugin:{version:wc_mercadopago_custom_checkout_params.plugin_version},platform:{name:"woocommerce",uri:window.location.href,version:wc_mercadopago_custom_checkout_params.platform_version,location:`${wc_mercadopago_custom_checkout_params.location}_${wc_mercadopago_custom_checkout_params.theme}`}};navigator.sendBeacon("https://api.mercadopago.com/v1/plugins/melidata/errors",JSON.stringify(s))};var m;const p="mp_checkout_blocks",d="woo-mercado-pago-pix",_=(0,a.getSetting)("woo-mercado-pago-pix_data",{}),u=(0,s.decodeEntities)(_.title)||"Checkout Pix",k=n=>{(e=>{const{extensionCartUpdate:n}=wc.blocksCheckout,{eventRegistration:s,emitResponse:a}=e,{onPaymentSetup:o,onCheckoutSuccess:i,onCheckoutFail:r}=s;(0,t.useEffect)((()=>{((e,t)=>{e({namespace:c,data:{action:"add",gateway:t}})})(n,d);const e=o((()=>({type:a.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:c,data:{action:"remove",gateway:t}})})(n,d),e())}),[o]),(0,t.useEffect)((()=>{const e=i((async e=>{e.processingResponse.message=d;const t=e.processingResponse;return l("MP_PIX_BLOCKS_SUCCESS",t.paymentStatus,p),{type:a.responseTypes.SUCCESS}}));return()=>e()}),[i]),(0,t.useEffect)((()=>{const e=r((e=>{const t=e.processingResponse;return l("MP_PIX_BLOCKS_ERROR",t.paymentStatus,p),{type:a.responseTypes.FAIL,messageContext:a.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[r])})(n);const{test_mode_title:s,test_mode_description:a,pix_template_title:m,pix_template_subtitle:u,pix_template_src:k,pix_template_alt:g,terms_and_conditions_description:w,terms_and_conditions_link_text:E,terms_and_conditions_link_src:S,test_mode:h,amount:x,message_error_amount:y}=_.params;return null==x?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{className:"alert-message"},y)):(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-pix-container"},(0,e.createElement)("div",{className:"mp-checkout-pix-content"},h?(0,e.createElement)(o,{title:s,description:a}):null,(0,e.createElement)(i,{title:m,subtitle:u,alt:g,linkSrc:k}))),(0,e.createElement)(r,{description:w,linkText:E,linkSrc:S,checkoutClass:"pix"}))},g={name:d,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,a=(0,s.decodeEntities)(_?.params?.fee_title||""),c=`${u} ${a}`;return(0,e.createElement)(n,{text:c})}),null),content:(0,e.createElement)(k,null),edit:(0,e.createElement)(k,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(m=_?.supports)&&void 0!==m?m:[]}};(0,n.registerPaymentMethod)(g)})();