(()=>{"use strict";var e={20:(e,t,n)=>{var s=n(609),o=Symbol.for("react.element"),c=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,n){var s,c={},p=null,d=null;for(s in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!i.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:o,type:e,key:p,ref:d,props:c,_owner:r.current}}t.Fragment=c,t.jsx=p,t.jsxs=p},609:e=>{e.exports=window.React},848:(e,t,n)=>{e.exports=n(20)}},t={};const n=window.wc.wcBlocksRegistry,s=window.wc.wcSettings,o=window.wp.element,c=window.wp.htmlEntities,a="mercadopago_blocks_update_cart";var r=function n(s){var o=t[s];if(void 0!==o)return o.exports;var c=t[s]={exports:{}};return e[s](c,c.exports,n),c.exports}(848);const i=({labelMessage:e,helperInvalid:t,helperEmpty:n,helperWrong:s,inputName:o,hiddenId:c,inputDataCheckout:a,selectId:i,selectName:p,selectDataCheckout:d,flagError:l,documents:u,validate:m,inputId:_=""})=>(0,r.jsx)("div",{className:"mp-checkout-ticket-input-document",children:(0,r.jsx)("input-document",{"input-id":_,"label-message":e,"helper-invalid":t,"helper-empty":n,"helper-wrong":s,"input-name":o,"hidden-id":c,"input-data-checkout":a,"select-id":i,"select-name":p,"select-data-checkout":d,"flag-error":l,documents:u,validate:m})}),p=({description:e,linkText:t,linkSrc:n,checkoutClass:s="pro"})=>(0,r.jsx)("div",{className:`mp-checkout-${s}-terms-and-conditions`,children:(0,r.jsx)("terms-and-conditions",{description:e,"link-text":t,"link-src":n})}),d=({title:e,description:t,linkText:n,linkSrc:s})=>(0,r.jsx)("div",{className:"mp-test-mode-container",children:(0,r.jsx)("test-mode",{title:e,description:t,"link-text":n,"link-src":s})}),l=({name:e,label:t,optional:n,options:s,helperMessage:o,hiddenId:c,defaultOption:a})=>(0,r.jsx)("input-select",{name:e,label:t,options:s,optional:n,"helper-message":o,"hidden-id":c,"default-option":a}),u=({text:e,imgSrc:t,id:n})=>(0,r.jsxs)("div",{id:n,className:"row-image-select",children:[(0,r.jsx)("img",{src:t}),(0,r.jsx)("p",{children:e})]});var m;const _="mp_checkout_blocks",h="woo-mercado-pago-pse",y=(0,s.getSetting)("woo-mercado-pago-pse_data",{}),k=(0,c.decodeEntities)(y.title)||"Checkout Pse";let g=!1;const f=e=>{const{PaymentMethodLabel:t}=e.components,n=(0,c.decodeEntities)(y?.params?.fee_title||""),s=`${k} ${n}`;return(0,r.jsx)(u,{text:s,imgSrc:y.params.checkout_blocks_row_image_src})},x=e=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:n,emitResponse:s}=e,{onPaymentSetup:c,onCheckoutSuccess:r,onCheckoutFail:i}=n;(0,o.useEffect)((()=>{((e,t)=>{e({namespace:a,data:{action:"add",gateway:t}})})(t,h);const e=c((()=>({type:s.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:a,data:{action:"remove",gateway:t}})})(t,h),e())}),[c]),(0,o.useEffect)((()=>{const e=r((async e=>{const t=e.processingResponse;return sendMetric("MP_PSE_BLOCKS_SUCCESS",t.paymentStatus,_),{type:s.responseTypes.SUCCESS}}));return()=>e()}),[r]),(0,o.useEffect)((()=>{const e=i((e=>{"undefined"!=typeof MPCheckoutErrorDispatcher&&MPCheckoutErrorDispatcher.dispatchEventWhenBlocksCheckoutErrorOccurred(e);const t=e.processingResponse;return sendMetric("MP_PSE_BLOCKS_ERROR",t.paymentStatus,_),{type:s.responseTypes.FAIL,messageContext:s.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[i])})(e);const{test_mode_title:t,test_mode_description:n,test_mode_link_text:s,test_mode_link_src:c,input_document_label:u,input_document_helper_empty:m,input_document_helper_invalid:k,input_document_helper_wrong:f,pse_text_label:x,person_type_label:v,amount:S,site_id:E,terms_and_conditions_description:C,terms_and_conditions_link_text:b,terms_and_conditions_link_src:w,test_mode:j,financial_institutions:N,financial_institutions_label:R,financial_institutions_helper:P,financial_placeholder:I,message_error_amount:M}=y.params;if(null==S)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:"alert-message",children:M})});const O=(0,o.useRef)(null),{eventRegistration:T,emitResponse:D}=e,{onPaymentSetup:q}=T;let L={inputId:"mp-pse-gateway-document-input",labelMessage:u,helperInvalid:k,helperEmpty:m,helperWrong:f,validate:"true",selectId:"doc_type",flagError:"mercadopago_pse[docNumberError]",inputName:"mercadopago_pse[docNumber]",selectName:"mercadopago_pse[docType]",documents:'["CC","CE","NIT"]'};return(0,o.useEffect)((()=>{g||("undefined"!=typeof MPCheckoutFieldsDispatcher&&MPCheckoutFieldsDispatcher?.addEventListenerDispatcher(document.getElementById("mp-pse-gateway-document-input"),"focusout","pse_document_filled",{dispatchOnlyIf:e=>e?.target?.value.length}),g=!0)}),[]),(0,o.useEffect)((()=>{const e=q((async()=>{const e=document.querySelector(".mp-checkout-pse-input-document").querySelector(".mp-input-document > input-helper > div"),t={"mercadopago_pse[site_id]":E,"mercadopago_pse[amount]":S.toString(),"mercadopago_pse[doc_type]":O.current.querySelector("#doc_type")?.value,"mercadopago_pse[doc_number]":O.current.querySelector("#form-checkout__identificationNumber-container > input")?.value,"mercadopago_pse[bank]":O.current.querySelector("#mercadopago_pse\\[bank\\]").value,"mercadopago_pse[person_type]":O.current.querySelector("#mercadopago_pse\\[person_type\\]").value};L.documents&&""===t["mercadopago_pse[doc_number]"]&&o(e,"flex");let n=document.querySelector("#mercadopago_pse\\[bank\\]"),s=document.querySelector(".mp-checkout-pse-bank").querySelector("input-helper > div");function o(e,t){e&&e.style&&(e.style.display=t)}function c(e){return e&&"flex"===e.style.display}return""!==n.value&&I!==n.value||o(s,"flex"),{type:c(s)||c(e)?D.responseTypes.ERROR:D.responseTypes.SUCCESS,meta:{paymentMethodData:{...window.mpHiddenInputDataFromBlocksCheckout,...t}}}}));return()=>e()}),[D.responseTypes.ERROR,D.responseTypes.SUCCESS,q]),(0,r.jsx)("div",{className:"mp-checkout-container",children:(0,r.jsx)("div",{className:"mp-checkout-pse-container",children:(0,r.jsxs)("div",{ref:O,className:"mp-checkout-pse-content",children:[j?(0,r.jsx)(d,{title:t,description:n,"link-text":s,"link-src":c}):null,(0,r.jsx)("p",{className:"mp-checkout-pse-text","data-cy":"checkout-pse-text",children:x}),(0,r.jsx)("div",{className:"mp-checkout-pse-person",children:(0,r.jsx)(l,{name:"mercadopago_pse[person_type]",label:v,optional:!1,options:'[{"id":"individual", "description": "individual"},{"id":"association", "description": "asociaciÃ³n"}]'})}),(0,r.jsx)("div",{className:"mp-checkout-pse-input-document",children:L.documents?(0,r.jsx)(i,{...L}):null}),(0,r.jsx)("div",{className:"mp-checkout-pse-bank",children:(0,r.jsx)(l,{name:"mercadopago_pse[bank]",label:R,optional:!1,options:N,"hidden-id":"hidden-financial-pse","helper-message":P,"default-option":I})}),(0,r.jsx)("div",{id:"mp-box-loading"}),(0,r.jsx)(p,{description:C,linkText:b,linkSrc:w,checkoutClass:"pse"})]})})})},v={name:h,label:(0,r.jsx)(f,{}),content:(0,r.jsx)(x,{}),edit:(0,r.jsx)(x,{}),canMakePayment:()=>!0,ariaLabel:k,supports:{features:null!==(m=y?.supports)&&void 0!==m?m:[]}};(0,n.registerPaymentMethod)(v)})();