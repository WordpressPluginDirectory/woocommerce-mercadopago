(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,o=window.wc.wcSettings,a=window.wp.element,c=window.wp.htmlEntities,n="mercadopago_blocks_update_cart",s=(e,t,o)=>{const a={name:e,message:t,target:o,plugin:{version:wc_mercadopago_custom_checkout_params.plugin_version},platform:{name:"woocommerce",uri:window.location.href,version:wc_mercadopago_custom_checkout_params.platform_version,location:`${wc_mercadopago_custom_checkout_params.location}_${wc_mercadopago_custom_checkout_params.theme}`}};navigator.sendBeacon("https://api.mercadopago.com/v1/plugins/melidata/errors",JSON.stringify(a))};var r;const m="mp_checkout_blocks",d="woo-mercado-pago-ticket",i=(0,o.getSetting)("woo-mercado-pago-ticket_data",{}),p=(0,c.decodeEntities)(i.title)||"Checkout Ticket",u=t=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:o,emitResponse:c}=e,{onPaymentSetup:r,onCheckoutSuccess:i,onCheckoutFail:p}=o;(0,a.useEffect)((()=>{((e,t)=>{e({namespace:n,data:{action:"add",gateway:t}})})(t,d);const e=r((()=>({type:c.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:n,data:{action:"remove",gateway:t}})})(t,d),e())}),[r]),(0,a.useEffect)((()=>{const e=i((async e=>{const t=e.processingResponse;return s("MP_TICKET_BLOCKS_SUCCESS",t.paymentStatus,m),{type:c.responseTypes.SUCCESS}}));return()=>e()}),[i]),(0,a.useEffect)((()=>{const e=p((e=>{const t=e.processingResponse;return s("MP_TICKET_BLOCKS_ERROR",t.paymentStatus,m),{type:c.responseTypes.FAIL,messageContext:c.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[p])})(t);const{eventRegistration:o,emitResponse:c}=t,{onPaymentSetup:r}=o,p=["address_city","address_federal_unit","address_zip_code","address_street_name","address_street_number","address_neighborhood","address_complement"];return(0,a.useEffect)((()=>{const e=r((async()=>{var e;const t=document.querySelector(".mp-input"),o=document.getElementById("mp-doc-number-helper"),a=document.getElementById("mp-payment-method-helper"),n={"mercadopago_ticket[site_id]":document.getElementsByName("mercadopago_ticket[site_id]")[0].value,"mercadopago_ticket[amount]":document.getElementsByName("mercadopago_ticket[amount]")[0].value,"mercadopago_ticket[doc_type]":document.getElementsByName("mercadopago_ticket[doc_type]")[0]?.value,"mercadopago_ticket[doc_number]":null!==(e=document.getElementsByName("mercadopago_ticket[doc_number]")[0]?.value)&&void 0!==e?e:document.getElementsByName("mercadopago_ticket[docNumberError]")[0]?.value};document.querySelector(".mp-checkout-ticket-container").querySelectorAll(".mp-input-radio-radio").forEach((e=>{e.checked&&(n["mercadopago_ticket[payment_method_id]"]=e.value,a.style.display="none")}));const s=document.getElementsByName("mercadopago_ticket[site_id]")[0].value;"MLB"==s&&p.forEach((e=>{n[`mercadopago_ticket[${e}]`]=document.querySelector(`#form-checkout__${e}`).value})),"MLB"!=s&&"MLU"!=s||""!==n["mercadopago_ticket[doc_number]"]||(t.classList.add("mp-error"),m(o,"flex")),n["mercadopago_ticket[payment_method_id]"]||m(a,"flex");const r="MLB"==s&&!addressFieldsFromTicketRowAreValid();function m(e,t){e&&e.style&&(e.style.display=t)}function d(e){return e&&"flex"===e.style.display}return{type:d(o)||d(a)||r?c.responseTypes.ERROR:c.responseTypes.SUCCESS,meta:{paymentMethodData:n}}}));return()=>e()}),[c.responseTypes.ERROR,c.responseTypes.SUCCESS,r]),(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:i.params.content}})},l={name:d,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:o}=t.components,a=(0,c.decodeEntities)(i?.params?.fee_title||""),n=`${p} ${a}`;return(0,e.createElement)(o,{text:n})}),null),content:(0,e.createElement)(u,null),edit:(0,e.createElement)(u,null),canMakePayment:()=>!0,ariaLabel:p,supports:{features:null!==(r=i?.supports)&&void 0!==r?r:[]}};(0,t.registerPaymentMethod)(l)})();