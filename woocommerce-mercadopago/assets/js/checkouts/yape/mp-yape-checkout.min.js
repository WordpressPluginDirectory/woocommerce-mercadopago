async function mercadoPagoFormHandlerYape(){if(!document.getElementById("payment_method_woo-mercado-pago-yape").checked)return!0;if(!isFormValid())return!1;const e={otp:getCodeValue(),phoneNumber:document.getElementById("checkout__yapePhoneNumber").value.replaceAll(" ","")};if(!window.mpSdkInstance){const e=new MercadoPago(wc_mercadopago_yape_checkout_params.public_key);window.mpSdkInstance=e}const o=window.mpSdkInstance.yape(e);try{const e=await o.create();return document.getElementById("yapeToken").value=e.id,!0}catch(e){console.error(e)}return!1}const getCodeValue=function(){const e=document.querySelectorAll(".mp-yape-code-input");let o="";return e.forEach((e=>{o+=e.value})),o},getForm=()=>{const e=document.querySelector("form.checkout"),o=document.querySelector("form#order_review");return e||o},isFormValid=()=>{const e=getForm(),o=e?.querySelector(".payment_method_woo-mercado-pago-yape");return!!o&&(document.getElementsByTagName("input-field")[0].validate(),document.getElementsByTagName("input-code")[0].validate(),!Array.from(o.querySelectorAll("input-helper")).some((e=>"none"!==e.querySelector("div").style.display)))};let yapeCodeLayoutObserver;const updateYapeCodeLayout=()=>{const e=document.getElementById("checkout__yapePhoneNumber"),o=document.querySelector(".payment_method_woo-mercado-pago-yape .mp-yape-input-container");if(!e||!o)return;const t=window.getComputedStyle(o),a=228+5*(parseFloat(t.columnGap||t.gap||"8")||8),r=e.getBoundingClientRect().width>=a;o.classList.toggle("mp-yape-code-columns-6",r),o.classList.toggle("mp-yape-code-columns-3",!r)},setupYapeCodeLayout=()=>{yapeCodeLayoutObserver&&(yapeCodeLayoutObserver.disconnect(),yapeCodeLayoutObserver=null);const e=document.getElementById("checkout__yapePhoneNumber");window.ResizeObserver&&e&&(yapeCodeLayoutObserver=new ResizeObserver(updateYapeCodeLayout),yapeCodeLayoutObserver.observe(e)),updateYapeCodeLayout()};jQuery("form.checkout").on("checkout_place_order_woo-mercado-pago-yape",((e,o)=>{const t=jQuery("#yapeToken");return t.data("fresh")?(t.data("fresh",null),!0):(mercadoPagoFormHandlerYape().then((e=>{e&&(t.data("fresh","true"),o.$checkout_form.trigger("submit"))})),!1)})),jQuery("form#order_review").submit((async function(e){e.preventDefault(),await mercadoPagoFormHandlerYape(),this.submit()})),jQuery((()=>{setupYapeCodeLayout()})),jQuery(document.body).on("updated_checkout",(()=>{setupYapeCodeLayout()}));