class MPSuperTokenTriggerFieldsStrategy{CLICKABLE_AREA_CLASS_NAME="mp-checkout-clickable-area";CHECKOUT_CUSTOM_FIELDS_SELECTORS=["#form-checkout__cardNumber-container","#form-checkout__cardholderName","#form-checkout__expirationDate-container","#form-checkout__securityCode-container"];FIELD_SELECTOR_TO_CHECKOUT_FIELD_MAP={"#form-checkout__cardNumber-container":{sdkFieldName:"cardNumber",isSdkField:!0,selector:"#form-checkout__cardNumber-container"},"#form-checkout__cardholderName":{sdkFieldName:null,isSdkField:!1,selector:"#form-checkout__cardholderName"},"#form-checkout__expirationDate-container":{sdkFieldName:"expirationDate",isSdkField:!0,selector:"#form-checkout__expirationDate-container"},"#form-checkout__securityCode-container":{sdkFieldName:"securityCode",isSdkField:!0,selector:"#form-checkout__securityCode-container"}};clickableAreaClickListenerReferences={"#form-checkout__cardNumber-container":null,"#form-checkout__cardholderName":null,"#form-checkout__expirationDate-container":null,"#form-checkout__securityCode-container":null};buyerEmail=null;amount=null;mpSuperTokenAuthenticator=null;mpSuperTokenPaymentMethods=null;constructor(e,t){this.mpSuperTokenAuthenticator=e,this.mpSuperTokenPaymentMethods=t}createClickableAreaListeners(e,t){this.buyerEmail=t,this.amount=e,t&&e&&this.CHECKOUT_CUSTOM_FIELDS_SELECTORS.forEach((e=>{const t=document.querySelector(e);t&&!t.classList.contains(this.CLICKABLE_AREA_CLASS_NAME)&&(t.style.pointerEvents="none",t.classList.add(this.CLICKABLE_AREA_CLASS_NAME),this.clickableAreaClickListenerReferences[e]=t.parentElement.addEventListener("click",(()=>this.onClickOnClickableArea.call(this,e)),{once:!0}))}))}removeAllClickableAreaListeners(){this.CHECKOUT_CUSTOM_FIELDS_SELECTORS.forEach((e=>{const t=document.querySelector(e);t&&t.classList.contains(this.CLICKABLE_AREA_CLASS_NAME)&&(t.style.pointerEvents="auto",t.classList.remove(this.CLICKABLE_AREA_CLASS_NAME),this.clickableAreaClickListenerReferences[e]?.removeEventListener("click",(()=>this.onClickOnClickableArea.call(this)),{once:!0}))}))}focusOnField(e){if(!e)return;const t=this.FIELD_SELECTOR_TO_CHECKOUT_FIELD_MAP[e];t&&(t.isSdkField?window.mpCustomCheckoutHandler?.cardForm?.fields?.[t.sdkFieldName]?.focus():document.querySelector(t.selector)?.focus())}async onClickOnClickableArea(e){try{if(this.mpSuperTokenAuthenticator.isUserClosedModal()||this.mpSuperTokenPaymentMethods.hasStoredPaymentMethods())return void this.removeAllClickableAreaListeners();if(!this.buyerEmail||!this.amount||!e)return;await this.mpSuperTokenAuthenticator.authenticate(this.amount,this.buyerEmail)}finally{this.removeAllClickableAreaListeners(),this.focusOnField(e)}}}