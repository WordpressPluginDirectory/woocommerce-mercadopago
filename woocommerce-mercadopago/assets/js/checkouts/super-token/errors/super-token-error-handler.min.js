class MPSuperTokenErrorHandler{constructor(r,e){this.paymentMethods=r,this.metrics=e}isExpectedError(r){return MPSuperTokenExpectedErrors.some((e=>r.includes(e)))}parseError(r){const e="string"!=typeof r?`${r}`:r;return{code:e||MPSuperTokenErrorCodes.UNKNOWN_ERROR,message:e||"Unknown error"}}reportErrorMetric(r,e){!this.isExpectedError(r)&&this.metrics&&this.metrics.errorOnSubmit(r,e)}displayError(r){if(this.paymentMethods)if(r.includes(MPSuperTokenErrorCodes.SELECT_PAYMENT_METHOD_NOT_VALID))this.paymentMethods.forceShowValidationErrors();else{const e=this.paymentMethods.convertErrorCodeToErrorMessage(r);this.paymentMethods.showSuperTokenError(e)}}handleError(r){const{code:e,message:o}=this.parseError(r);return this.reportErrorMetric(e,o),this.displayError(e),e}}