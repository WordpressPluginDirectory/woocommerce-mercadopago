class MPSuperTokenMetrics{PLATFORM_NAME="woocommerce";CORE_MONITOR_URL="https://api.mercadopago.com/ppcore/prod/monitor/v1/event/datadog/big";PLUGIN_VERSION=wc_mercadopago_supertoken_metrics_params.plugin_version;PLATFORM_VERSION=wc_mercadopago_supertoken_metrics_params.platform_version;SITE_ID=wc_mercadopago_supertoken_metrics_params.site_id;CUST_ID=wc_mercadopago_supertoken_metrics_params.cust_id;LOCATION=wc_mercadopago_supertoken_metrics_params.location;mpSdkInstance=null;constructor(e){this.mpSdkInstance=e}getSdkInstanceId(){try{return this?.mpSdkInstance?.getSDKInstanceId()||"Unknown"}catch(e){return"Unknown"}}getEnvironment(){return"prod"}sendMetric(e,r,t){fetch(`${this.CORE_MONITOR_URL}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:`${r}`,message:`${t}`,plugin_version:this.PLUGIN_VERSION,platform:{name:this.PLATFORM_NAME,uri:window.location.href,version:this.PLATFORM_VERSION,url:`${this.LOCATION}${this.THEME?`_${this.THEME}`:""}`},details:{site_id:this.SITE_ID,environment:this.getEnvironment(),sdk_instance_id:this.getSdkInstanceId(),cust_id:this.CUST_ID}})}).catch((e=>console.error("Super Token metrics error: ",e)))}canUseSuperToken(e,r=null){const t=r?r?.message||"Unknown error":null;this.sendMetric("can_use_super_token",e,t)}errorToAuthorizePayment(e){this.sendMetric("error_to_authorize_payment","true",e?.message||"Unknown error")}errorToGetSimplifiedAuth(e){this.sendMetric("error_to_get_simplified_auth","true",e?.message||"Unknown error")}errorToGetFastPaymentToken(e){this.sendMetric("error_to_get_fast_payment_token","true",e?.message||"Unknown error")}errorToBuildAuthenticator(e){const r=e?.message||"Unknown error";this.shouldSkipError(r)||this.sendMetric("error_to_build_authenticator","true",r)}errorToMountCVVField(e,r){this.sendMetric("error_to_mount_cvv_field",r?.id||"Unknown payment method",e?.message||"Unknown error")}errorToUpdateSecurityCode(e,r){this.sendMetric("error_to_update_security_code",r?.id||"Unknown payment method",e?.message||"Unknown error")}errorOnSubmit(e,r){this.shouldSkipError(r)||this.sendMetric("error_on_submit_super_token",e,r||"Unknown error")}shouldSkipError(e){if(!e)return!1;const r=e.replace(/\[mercado pago\]:\s*/gi,"").trim().toLowerCase();return MPSuperTokenSkippableErrorMessages.some((e=>e instanceof RegExp?e.test(r):r.includes(e)))}errorToGetAccountPaymentMethods(e){const r=e?.message||"Unknown error";this.shouldSkipError(r)||this.sendMetric("error_to_get_account_payment_methods","true",r)}registerClickOnPlaceOrderButton(){this.sendMetric("super_token_click_on_place_order_button","true","")}}